include <p16f877.inc>
cteA equ 0x20
voltaje equ h'26'
	ORG 0
GOTO INICIO
	ORG 5
INICIO:
	CLRF PORTA
	BSF STATUS, RP0
	BCF STATUS, RP1
	CLRF ADCON1
	CLRF PORTD
	BCF STATUS, RP0
	MOVLW B'11101001'
	MOVWF ADCON0
LOOP2:	
	BSF ADCON0, 2
	CALL RETARDO
LOOP:
	BTFSC ADCON0, 2
	GOTO LOOP
 
	MOVF ADRESH, W
	MOVWF voltaje
	MOVLW .42
	SUBWF voltaje, 0
	BTFSS STATUS, Z
	GOTO CHECK_C_0
CHECK_V_1:
	MOVLW .84
	SUBWF voltaje, 0
	BTFSS STATUS, Z
	GOTO CHECK_C_1
CHECK_V_2:
	MOVLW .126
	SUBWF voltaje, 0
	BTFSS STATUS, Z
	GOTO CHECK_C_2
CHECK_V_3:
	MOVLW .168
	SUBWF voltaje, 0
	BTFSS STATUS, Z
	GOTO CHECK_C_3
CHECK_V_4:
	MOVLW .210
	SUBWF voltaje, 0
	BTFSS STATUS, Z
	GOTO CHECK_C_4
CHECK_V_5:
	GOTO CHECK_C_5
	GOTO LOOP2


RETARDO:
	MOVLW 0X30
	MOVWF cteA
LOOPR:
	DECFSZ cteA
	GOTO LOOPR
	RETURN

CHECK_C_0:
	BTFSC STATUS, C
		GOTO CHECK_V_1
	MOVLW B'00000000'
	MOVWF PORTD
	GOTO LOOP2

CHECK_C_1:
	BTFSC STATUS, C
		GOTO CHECK_V_2
	MOVLW B'00000001'
	MOVWF PORTD
	GOTO LOOP2

CHECK_C_2:
	BTFSC STATUS, C
		GOTO CHECK_V_3
	MOVLW B'00000010'
	MOVWF PORTD
	GOTO LOOP2

CHECK_C_3:
	BTFSC STATUS, C
		GOTO CHECK_V_4
	MOVLW B'00000011'
	MOVWF PORTD
	GOTO LOOP2


CHECK_C_4:
	BTFSC STATUS, C
		GOTO CHECK_V_5
	MOVLW B'00000100'
	MOVWF PORTD
	GOTO LOOP2

CHECK_C_5:
	MOVLW B'00000101'
	MOVWF PORTD
	GOTO LOOP2

END